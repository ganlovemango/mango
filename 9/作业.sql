mysql> show tables;
+--------------------+
| Tables_in_homework |
+--------------------+
| areainfo           |
| course             |
| emp                |
| grade              |
| rank               |
| student            |
| teacher            |
| tmp                |
+--------------------+
8 rows in set (0.00 sec)

mysql> desc student;
+-----------+------------+------+-----+---------+-------+
| Field     | Type       | Null | Key | Default | Extra |
+-----------+------------+------+-----+---------+-------+
| sno       | varchar(3) | NO   | PRI | NULL    |       |
| sname     | varchar(4) | NO   | MUL | NULL    |       |
| ssex      | varchar(2) | YES  |     | NULL    |       |
| sbirthday | datetime   | YES  |     | NULL    |       |
| class     | varchar(5) | YES  |     | NULL    |       |
+-----------+------------+------+-----+---------+-------+
5 rows in set (0.01 sec)

mysql> select sname,sex,class from student;
ERROR 1054 (42S22): Unknown column 'sex' in 'field list'
mysql> select sname,ssex,class from student;
+--------+------+-------+
| sname  | ssex | class |
+--------+------+-------+
| 李军   | 男   | 95033 |
| 陆君   | 男   | 95031 |
| 匡明   | 男   | 95031 |
| 王丽   | 女   | 95033 |
| 曾华   | 男   | 95033 |
| 王芳   | 女   | 95031 |
+--------+------+-------+
6 rows in set (0.00 sec)

mysql> select depart from teacher;
+-----------------+
| depart          |
+-----------------+
| 计算机系        |
| 计算机系        |
| 电子工程系      |
| 电子工程系      |
+-----------------+
4 rows in set (0.00 sec)

mysql> select distinct depart from teacher;
+-----------------+
| depart          |
+-----------------+
| 计算机系        |
| 电子工程系      |
+-----------------+
2 rows in set (0.01 sec)

mysql> select * from grade where degree between 60 and 80;
+-----+-------+--------+
| sno | cno   | degree |
+-----+-------+--------+
| 101 | 3-105 |     64 |
| 105 | 3-245 |     75 |
| 107 | 6-106 |     79 |
| 108 | 3-105 |     78 |
| 109 | 3-105 |     76 |
| 109 | 3-245 |     68 |
+-----+-------+--------+
6 rows in set (0.01 sec)

mysql> select * from grade where degree >=60 and degree <=80;
+-----+-------+--------+
| sno | cno   | degree |
+-----+-------+--------+
| 101 | 3-105 |     64 |
| 105 | 3-245 |     75 |
| 107 | 6-106 |     79 |
| 108 | 3-105 |     78 |
| 109 | 3-105 |     76 |
| 109 | 3-245 |     68 |
+-----+-------+--------+
6 rows in set (0.00 sec)

mysql> select * from grade where degree=85 or degree=86 or degree=88;
+-----+-------+--------+
| sno | cno   | degree |
+-----+-------+--------+
| 101 | 6-166 |     85 |
| 103 | 3-245 |     86 |
| 105 | 3-105 |     88 |
+-----+-------+--------+
3 rows in set (0.00 sec)

mysql> select * from grade where degree in (85,86,88);
+-----+-------+--------+
| sno | cno   | degree |
+-----+-------+--------+
| 101 | 6-166 |     85 |
| 103 | 3-245 |     86 |
| 105 | 3-105 |     88 |
+-----+-------+--------+
3 rows in set (0.00 sec)

mysql> select * from student where class='95031' or ssex='女';
+-----+--------+------+---------------------+-------+
| sno | sname  | ssex | sbirthday           | class |
+-----+--------+------+---------------------+-------+
| 103 | 陆君   | 男   | 1974-06-03 00:00:00 | 95031 |
| 105 | 匡明   | 男   | 1975-10-02 00:00:00 | 95031 |
| 107 | 王丽   | 女   | 1976-01-23 00:00:00 | 95033 |
| 109 | 王芳   | 女   | 1975-02-10 00:00:00 | 95031 |
+-----+--------+------+---------------------+-------+
4 rows in set (0.00 sec)

mysql> select * from student where class='95031' union select * from student where ssex='女';
+-----+--------+------+---------------------+-------+
| sno | sname  | ssex | sbirthday           | class |
+-----+--------+------+---------------------+-------+
| 103 | 陆君   | 男   | 1974-06-03 00:00:00 | 95031 |
| 105 | 匡明   | 男   | 1975-10-02 00:00:00 | 95031 |
| 109 | 王芳   | 女   | 1975-02-10 00:00:00 | 95031 |
| 107 | 王丽   | 女   | 1976-01-23 00:00:00 | 95033 |
+-----+--------+------+---------------------+-------+
4 rows in set (0.00 sec)

mysql> select * from student order by class desc;
+-----+--------+------+---------------------+-------+
| sno | sname  | ssex | sbirthday           | class |
+-----+--------+------+---------------------+-------+
| 101 | 李军   | 男   | 1976-02-20 00:00:00 | 95033 |
| 107 | 王丽   | 女   | 1976-01-23 00:00:00 | 95033 |
| 108 | 曾华   | 男   | 1977-09-01 00:00:00 | 95033 |
| 103 | 陆君   | 男   | 1974-06-03 00:00:00 | 95031 |
| 105 | 匡明   | 男   | 1975-10-02 00:00:00 | 95031 |
| 109 | 王芳   | 女   | 1975-02-10 00:00:00 | 95031 |
+-----+--------+------+---------------------+-------+
6 rows in set (0.00 sec)

mysql> select * from grade order by cno ,degree desc;
+-----+-------+--------+
| sno | cno   | degree |
+-----+-------+--------+
| 103 | 3-105 |     92 |
| 107 | 3-105 |     91 |
| 105 | 3-105 |     88 |
| 108 | 3-105 |     78 |
| 109 | 3-105 |     76 |
| 101 | 3-105 |     64 |
| 103 | 3-245 |     86 |
| 105 | 3-245 |     75 |
| 109 | 3-245 |     68 |
| 107 | 6-106 |     79 |
| 101 | 6-166 |     85 |
| 108 | 6-166 |     81 |
| 110 | 8-111 |     89 |
+-----+-------+--------+
13 rows in set (0.00 sec)

mysql> select s.sno ,s.cno from grade s join (select cno,max(degree) from grade ) b on s.cno=b.cno;
ERROR 1140 (42000): In aggregated query without GROUP BY, expression #1 of SELECT list contains nonaggregated column 'homework.grade.cno'; this is incompatible with sql_mode=only_full_group_by
mysql> select s.sno ,s.cno from grade s join (select cno,max(degree) from grade  group by cno) b on s.cno=b.cno;
+-----+-------+
| sno | cno   |
+-----+-------+
| 101 | 3-105 |
| 101 | 6-166 |
| 103 | 3-105 |
| 103 | 3-245 |
| 105 | 3-105 |
| 105 | 3-245 |
| 107 | 3-105 |
| 107 | 6-106 |
| 108 | 3-105 |
| 108 | 6-166 |
| 109 | 3-105 |
| 109 | 3-245 |
| 110 | 8-111 |
+-----+-------+
13 rows in set (0.01 sec)

mysql> select * from grade s join (select cno,max(degree) from grade  group by cno) b on s.cno=b.cno;
+-----+-------+--------+-------+-------------+
| sno | cno   | degree | cno   | max(degree) |
+-----+-------+--------+-------+-------------+
| 101 | 3-105 |     64 | 3-105 |          92 |
| 101 | 6-166 |     85 | 6-166 |          85 |
| 103 | 3-105 |     92 | 3-105 |          92 |
| 103 | 3-245 |     86 | 3-245 |          86 |
| 105 | 3-105 |     88 | 3-105 |          92 |
| 105 | 3-245 |     75 | 3-245 |          86 |
| 107 | 3-105 |     91 | 3-105 |          92 |
| 107 | 6-106 |     79 | 6-106 |          79 |
| 108 | 3-105 |     78 | 3-105 |          92 |
| 108 | 6-166 |     81 | 6-166 |          85 |
| 109 | 3-105 |     76 | 3-105 |          92 |
| 109 | 3-245 |     68 | 3-245 |          86 |
| 110 | 8-111 |     89 | 8-111 |          89 |
+-----+-------+--------+-------+-------------+
13 rows in set (0.00 sec)

mysql> select * from grade s join (select cno,max(degree) num from grade  group by cno) b on s.cno=b.cno where s.degree=b.num;
+-----+-------+--------+-------+------+
| sno | cno   | degree | cno   | num  |
+-----+-------+--------+-------+------+
| 101 | 6-166 |     85 | 6-166 |   85 |
| 103 | 3-105 |     92 | 3-105 |   92 |
| 103 | 3-245 |     86 | 3-245 |   86 |
| 107 | 6-106 |     79 | 6-106 |   79 |
| 110 | 8-111 |     89 | 8-111 |   89 |
+-----+-------+--------+-------+------+
5 rows in set (0.00 sec)

mysql> select * from grade where degree = (select max(degree) from grade);
+-----+-------+--------+
| sno | cno   | degree |
+-----+-------+--------+
| 103 | 3-105 |     92 |
+-----+-------+--------+
1 row in set (0.00 sec)

mysql> select avg(degree) from grade where cno='3-105';
+-------------+
| avg(degree) |
+-------------+
|     81.5000 |
+-------------+
1 row in set (0.00 sec)

mysql> select cno,avg(degree) from grade where cno='3-105';
+-------+-------------+
| cno   | avg(degree) |
+-------+-------------+
| 3-105 |     81.5000 |
+-------+-------------+
1 row in set (0.00 sec)

mysql> select sno,avg(degree) from grade where cno='3-105';
ERROR 1140 (42000): In aggregated query without GROUP BY, expression #1 of SELECT list contains nonaggregated column 'homework.grade.sno'; this is incompatible with sql_mode=only_full_group_by
mysql> select avg(degree) from grade where cno='3-105';
+-------------+
| avg(degree) |
+-------------+
|     81.5000 |
+-------------+
1 row in set (0.00 sec)

mysql> select * from grade where cno like '3%';
+-----+-------+--------+
| sno | cno   | degree |
+-----+-------+--------+
| 101 | 3-105 |     64 |
| 103 | 3-105 |     92 |
| 103 | 3-245 |     86 |
| 105 | 3-105 |     88 |
| 105 | 3-245 |     75 |
| 107 | 3-105 |     91 |
| 108 | 3-105 |     78 |
| 109 | 3-105 |     76 |
| 109 | 3-245 |     68 |
+-----+-------+--------+
9 rows in set (0.00 sec)

mysql> select * from grade where cno like '3%' order by cno;
+-----+-------+--------+
| sno | cno   | degree |
+-----+-------+--------+
| 101 | 3-105 |     64 |
| 103 | 3-105 |     92 |
| 105 | 3-105 |     88 |
| 107 | 3-105 |     91 |
| 108 | 3-105 |     78 |
| 109 | 3-105 |     76 |
| 103 | 3-245 |     86 |
| 105 | 3-245 |     75 |
| 109 | 3-245 |     68 |
+-----+-------+--------+
9 rows in set (0.00 sec)

mysql> select cno,count(*) from grade where cno like '3%' group by cno
    -> ;
+-------+----------+
| cno   | count(*) |
+-------+----------+
| 3-105 |        6 |
| 3-245 |        3 |
+-------+----------+
2 rows in set (0.00 sec)

mysql> select cno,count(*) from grade where cno like '3%' group by cno having count(*) >=5;
+-------+----------+
| cno   | count(*) |
+-------+----------+
| 3-105 |        6 |
+-------+----------+
1 row in set (0.00 sec)

mysql> select sno,max(degree),min(degree) from grade group by sno;
+-----+-------------+-------------+
| sno | max(degree) | min(degree) |
+-----+-------------+-------------+
| 101 |          85 |          64 |
| 103 |          92 |          86 |
| 105 |          88 |          75 |
| 107 |          91 |          79 |
| 108 |          81 |          78 |
| 109 |          76 |          68 |
| 110 |          89 |          89 |
+-----+-------------+-------------+
7 rows in set (0.00 sec)

mysql> select * from grade order by sno;
+-----+-------+--------+
| sno | cno   | degree |
+-----+-------+--------+
| 101 | 3-105 |     64 |
| 101 | 6-166 |     85 |
| 103 | 3-105 |     92 |
| 103 | 3-245 |     86 |
| 105 | 3-105 |     88 |
| 105 | 3-245 |     75 |
| 107 | 3-105 |     91 |
| 107 | 6-106 |     79 |
| 108 | 3-105 |     78 |
| 108 | 6-166 |     81 |
| 109 | 3-105 |     76 |
| 109 | 3-245 |     68 |
| 110 | 8-111 |     89 |
+-----+-------+--------+
13 rows in set (0.00 sec)

mysql> select sno,max(degree) num1,min(degree) num2 from grade group by sno having  num1 <=90 and num2>=70;
+-----+------+------+
| sno | num1 | num2 |
+-----+------+------+
| 105 |   88 |   75 |
| 108 |   81 |   78 |
| 110 |   89 |   89 |
+-----+------+------+
3 rows in set (0.00 sec)

mysql> select sno,max(degree) num1,min(degree) num2 from grade group by sno having  num1 <90 and num2>70;
+-----+------+------+
| sno | num1 | num2 |
+-----+------+------+
| 105 |   88 |   75 |
| 108 |   81 |   78 |
| 110 |   89 |   89 |
+-----+------+------+
3 rows in set (0.00 sec)

mysql> select * from student s join grade g on s.sno=g.sno;
+-----+--------+------+---------------------+-------+-----+-------+--------+
| sno | sname  | ssex | sbirthday           | class | sno | cno   | degree |
+-----+--------+------+---------------------+-------+-----+-------+--------+
| 101 | 李军   | 男   | 1976-02-20 00:00:00 | 95033 | 101 | 3-105 |     64 |
| 101 | 李军   | 男   | 1976-02-20 00:00:00 | 95033 | 101 | 6-166 |     85 |
| 103 | 陆君   | 男   | 1974-06-03 00:00:00 | 95031 | 103 | 3-105 |     92 |
| 103 | 陆君   | 男   | 1974-06-03 00:00:00 | 95031 | 103 | 3-245 |     86 |
| 105 | 匡明   | 男   | 1975-10-02 00:00:00 | 95031 | 105 | 3-105 |     88 |
| 105 | 匡明   | 男   | 1975-10-02 00:00:00 | 95031 | 105 | 3-245 |     75 |
| 107 | 王丽   | 女   | 1976-01-23 00:00:00 | 95033 | 107 | 3-105 |     91 |
| 107 | 王丽   | 女   | 1976-01-23 00:00:00 | 95033 | 107 | 6-106 |     79 |
| 108 | 曾华   | 男   | 1977-09-01 00:00:00 | 95033 | 108 | 3-105 |     78 |
| 108 | 曾华   | 男   | 1977-09-01 00:00:00 | 95033 | 108 | 6-166 |     81 |
| 109 | 王芳   | 女   | 1975-02-10 00:00:00 | 95031 | 109 | 3-105 |     76 |
| 109 | 王芳   | 女   | 1975-02-10 00:00:00 | 95031 | 109 | 3-245 |     68 |
+-----+--------+------+---------------------+-------+-----+-------+--------+
12 rows in set (0.00 sec)

mysql> select sname,cno,degree from student s join grade g on s.sno=g.sno;
+--------+-------+--------+
| sname  | cno   | degree |
+--------+-------+--------+
| 匡明   | 3-105 |     88 |
| 匡明   | 3-245 |     75 |
| 曾华   | 3-105 |     78 |
| 曾华   | 6-166 |     81 |
| 李军   | 3-105 |     64 |
| 李军   | 6-166 |     85 |
| 王丽   | 3-105 |     91 |
| 王丽   | 6-106 |     79 |
| 王芳   | 3-105 |     76 |
| 王芳   | 3-245 |     68 |
| 陆君   | 3-105 |     92 |
| 陆君   | 3-245 |     86 |
+--------+-------+--------+
12 rows in set (0.00 sec)

mysql> select * from student s join grade g on g.sno=s.sno;
+-----+--------+------+---------------------+-------+-----+-------+--------+
| sno | sname  | ssex | sbirthday           | class | sno | cno   | degree |
+-----+--------+------+---------------------+-------+-----+-------+--------+
| 101 | 李军   | 男   | 1976-02-20 00:00:00 | 95033 | 101 | 3-105 |     64 |
| 101 | 李军   | 男   | 1976-02-20 00:00:00 | 95033 | 101 | 6-166 |     85 |
| 103 | 陆君   | 男   | 1974-06-03 00:00:00 | 95031 | 103 | 3-105 |     92 |
| 103 | 陆君   | 男   | 1974-06-03 00:00:00 | 95031 | 103 | 3-245 |     86 |
| 105 | 匡明   | 男   | 1975-10-02 00:00:00 | 95031 | 105 | 3-105 |     88 |
| 105 | 匡明   | 男   | 1975-10-02 00:00:00 | 95031 | 105 | 3-245 |     75 |
| 107 | 王丽   | 女   | 1976-01-23 00:00:00 | 95033 | 107 | 3-105 |     91 |
| 107 | 王丽   | 女   | 1976-01-23 00:00:00 | 95033 | 107 | 6-106 |     79 |
| 108 | 曾华   | 男   | 1977-09-01 00:00:00 | 95033 | 108 | 3-105 |     78 |
| 108 | 曾华   | 男   | 1977-09-01 00:00:00 | 95033 | 108 | 6-166 |     81 |
| 109 | 王芳   | 女   | 1975-02-10 00:00:00 | 95031 | 109 | 3-105 |     76 |
| 109 | 王芳   | 女   | 1975-02-10 00:00:00 | 95031 | 109 | 3-245 |     68 |
+-----+--------+------+---------------------+-------+-----+-------+--------+
12 rows in set (0.00 sec)

mysql> select * from student s join grade g on g.sno=s.sno join course c on c.cno = g.cno;
+-----+--------+------+---------------------+-------+-----+-------+--------+-------+-----------------+-----+
| sno | sname  | ssex | sbirthday           | class | sno | cno   | degree | cno   | cname           | tno |
+-----+--------+------+---------------------+-------+-----+-------+--------+-------+-----------------+-----+
| 101 | 李军   | 男   | 1976-02-20 00:00:00 | 95033 | 101 | 3-105 |     64 | 3-105 | 计算机导论      | 825 |
| 101 | 李军   | 男   | 1976-02-20 00:00:00 | 95033 | 101 | 6-166 |     85 | 6-166 | 数据电路        | 856 |
| 103 | 陆君   | 男   | 1974-06-03 00:00:00 | 95031 | 103 | 3-105 |     92 | 3-105 | 计算机导论      | 825 |
| 103 | 陆君   | 男   | 1974-06-03 00:00:00 | 95031 | 103 | 3-245 |     86 | 3-245 | 操作系统        | 804 |
| 105 | 匡明   | 男   | 1975-10-02 00:00:00 | 95031 | 105 | 3-105 |     88 | 3-105 | 计算机导论      | 825 |
| 105 | 匡明   | 男   | 1975-10-02 00:00:00 | 95031 | 105 | 3-245 |     75 | 3-245 | 操作系统        | 804 |
| 107 | 王丽   | 女   | 1976-01-23 00:00:00 | 95033 | 107 | 3-105 |     91 | 3-105 | 计算机导论      | 825 |
| 108 | 曾华   | 男   | 1977-09-01 00:00:00 | 95033 | 108 | 3-105 |     78 | 3-105 | 计算机导论      | 825 |
| 108 | 曾华   | 男   | 1977-09-01 00:00:00 | 95033 | 108 | 6-166 |     81 | 6-166 | 数据电路        | 856 |
| 109 | 王芳   | 女   | 1975-02-10 00:00:00 | 95031 | 109 | 3-105 |     76 | 3-105 | 计算机导论      | 825 |
| 109 | 王芳   | 女   | 1975-02-10 00:00:00 | 95031 | 109 | 3-245 |     68 | 3-245 | 操作系统        | 804 |
+-----+--------+------+---------------------+-------+-----+-------+--------+-------+-----------------+-----+
11 rows in set (0.00 sec)

mysql> mysql> select sname,cname,degree from student s join grade g on g.sno=s.sno join course c on c.cno = g.cno;
+--------+-----------------+--------+
| sname  | cname           | degree |
+--------+-----------------+--------+
| 李军   | 计算机导论      |     64 |
| 李军   | 数据电路        |     85 |
| 陆君   | 计算机导论      |     92 |
| 陆君   | 操作系统        |     86 |
| 匡明   | 计算机导论      |     88 |
| 匡明   | 操作系统        |     75 |
| 王丽   | 计算机导论      |     91 |
| 曾华   | 计算机导论      |     78 |
| 曾华   | 数据电路        |     81 |
| 王芳   | 计算机导论      |     76 |
| 王芳   | 操作系统        |     68 |
+--------+-----------------+--------+
11 rows in set (0.00 sec)

mysql> select * from student s join grade g on g.sno=s.sno;
+-----+--------+------+---------------------+-------+-----+-------+--------+
| sno | sname  | ssex | sbirthday           | class | sno | cno   | degree |
+-----+--------+------+---------------------+-------+-----+-------+--------+
| 101 | 李军   | 男   | 1976-02-20 00:00:00 | 95033 | 101 | 3-105 |     64 |
| 101 | 李军   | 男   | 1976-02-20 00:00:00 | 95033 | 101 | 6-166 |     85 |
| 103 | 陆君   | 男   | 1974-06-03 00:00:00 | 95031 | 103 | 3-105 |     92 |
| 103 | 陆君   | 男   | 1974-06-03 00:00:00 | 95031 | 103 | 3-245 |     86 |
| 105 | 匡明   | 男   | 1975-10-02 00:00:00 | 95031 | 105 | 3-105 |     88 |
| 105 | 匡明   | 男   | 1975-10-02 00:00:00 | 95031 | 105 | 3-245 |     75 |
| 107 | 王丽   | 女   | 1976-01-23 00:00:00 | 95033 | 107 | 3-105 |     91 |
| 107 | 王丽   | 女   | 1976-01-23 00:00:00 | 95033 | 107 | 6-106 |     79 |
| 108 | 曾华   | 男   | 1977-09-01 00:00:00 | 95033 | 108 | 3-105 |     78 |
| 108 | 曾华   | 男   | 1977-09-01 00:00:00 | 95033 | 108 | 6-166 |     81 |
| 109 | 王芳   | 女   | 1975-02-10 00:00:00 | 95031 | 109 | 3-105 |     76 |
| 109 | 王芳   | 女   | 1975-02-10 00:00:00 | 95031 | 109 | 3-245 |     68 |
+-----+--------+------+---------------------+-------+-----+-------+--------+
12 rows in set (0.00 sec)

mysql> select * from student s join grade g on g.sno=s.sno where class='95033';
+-----+--------+------+---------------------+-------+-----+-------+--------+
| sno | sname  | ssex | sbirthday           | class | sno | cno   | degree |
+-----+--------+------+---------------------+-------+-----+-------+--------+
| 101 | 李军   | 男   | 1976-02-20 00:00:00 | 95033 | 101 | 3-105 |     64 |
| 101 | 李军   | 男   | 1976-02-20 00:00:00 | 95033 | 101 | 6-166 |     85 |
| 107 | 王丽   | 女   | 1976-01-23 00:00:00 | 95033 | 107 | 3-105 |     91 |
| 107 | 王丽   | 女   | 1976-01-23 00:00:00 | 95033 | 107 | 6-106 |     79 |
| 108 | 曾华   | 男   | 1977-09-01 00:00:00 | 95033 | 108 | 3-105 |     78 |
| 108 | 曾华   | 男   | 1977-09-01 00:00:00 | 95033 | 108 | 6-166 |     81 |
+-----+--------+------+---------------------+-------+-----+-------+--------+
6 rows in set (0.00 sec)

mysql> select avg(degree) from student s join grade g on g.sno=s.sno where class='95033';
+-------------+
| avg(degree) |
+-------------+
|     79.6667 |
+-------------+
1 row in set (0.00 sec)

mysql> select * from student s join grade g on g.sno=s.sno;
+-----+--------+------+---------------------+-------+-----+-------+--------+
| sno | sname  | ssex | sbirthday           | class | sno | cno   | degree |
+-----+--------+------+---------------------+-------+-----+-------+--------+
| 101 | 李军   | 男   | 1976-02-20 00:00:00 | 95033 | 101 | 3-105 |     64 |
| 101 | 李军   | 男   | 1976-02-20 00:00:00 | 95033 | 101 | 6-166 |     85 |
| 103 | 陆君   | 男   | 1974-06-03 00:00:00 | 95031 | 103 | 3-105 |     92 |
| 103 | 陆君   | 男   | 1974-06-03 00:00:00 | 95031 | 103 | 3-245 |     86 |
| 105 | 匡明   | 男   | 1975-10-02 00:00:00 | 95031 | 105 | 3-105 |     88 |
| 105 | 匡明   | 男   | 1975-10-02 00:00:00 | 95031 | 105 | 3-245 |     75 |
| 107 | 王丽   | 女   | 1976-01-23 00:00:00 | 95033 | 107 | 3-105 |     91 |
| 107 | 王丽   | 女   | 1976-01-23 00:00:00 | 95033 | 107 | 6-106 |     79 |
| 108 | 曾华   | 男   | 1977-09-01 00:00:00 | 95033 | 108 | 3-105 |     78 |
| 108 | 曾华   | 男   | 1977-09-01 00:00:00 | 95033 | 108 | 6-166 |     81 |
| 109 | 王芳   | 女   | 1975-02-10 00:00:00 | 95031 | 109 | 3-105 |     76 |
| 109 | 王芳   | 女   | 1975-02-10 00:00:00 | 95031 | 109 | 3-245 |     68 |
+-----+--------+------+---------------------+-------+-----+-------+--------+
12 rows in set (0.00 sec)

mysql> select * from student s join grade g on g.sno=s.sno join rank r on r.rank='A';
+-----+--------+------+---------------------+-------+-----+-------+--------+------+-----+------+
| sno | sname  | ssex | sbirthday           | class | sno | cno   | degree | down | up  | rank |
+-----+--------+------+---------------------+-------+-----+-------+--------+------+-----+------+
| 101 | 李军   | 男   | 1976-02-20 00:00:00 | 95033 | 101 | 3-105 |     64 |   90 | 100 | A    |
| 101 | 李军   | 男   | 1976-02-20 00:00:00 | 95033 | 101 | 6-166 |     85 |   90 | 100 | A    |
| 103 | 陆君   | 男   | 1974-06-03 00:00:00 | 95031 | 103 | 3-105 |     92 |   90 | 100 | A    |
| 103 | 陆君   | 男   | 1974-06-03 00:00:00 | 95031 | 103 | 3-245 |     86 |   90 | 100 | A    |
| 105 | 匡明   | 男   | 1975-10-02 00:00:00 | 95031 | 105 | 3-105 |     88 |   90 | 100 | A    |
| 105 | 匡明   | 男   | 1975-10-02 00:00:00 | 95031 | 105 | 3-245 |     75 |   90 | 100 | A    |
| 107 | 王丽   | 女   | 1976-01-23 00:00:00 | 95033 | 107 | 3-105 |     91 |   90 | 100 | A    |
| 107 | 王丽   | 女   | 1976-01-23 00:00:00 | 95033 | 107 | 6-106 |     79 |   90 | 100 | A    |
| 108 | 曾华   | 男   | 1977-09-01 00:00:00 | 95033 | 108 | 3-105 |     78 |   90 | 100 | A    |
| 108 | 曾华   | 男   | 1977-09-01 00:00:00 | 95033 | 108 | 6-166 |     81 |   90 | 100 | A    |
| 109 | 王芳   | 女   | 1975-02-10 00:00:00 | 95031 | 109 | 3-105 |     76 |   90 | 100 | A    |
| 109 | 王芳   | 女   | 1975-02-10 00:00:00 | 95031 | 109 | 3-245 |     68 |   90 | 100 | A    |
+-----+--------+------+---------------------+-------+-----+-------+--------+------+-----+------+
12 rows in set (0.01 sec)

mysql> select * from student s join grade g on g.sno=s.sno join rank r on r.rank='A' where degree>down;
+-----+--------+------+---------------------+-------+-----+-------+--------+------+-----+------+
| sno | sname  | ssex | sbirthday           | class | sno | cno   | degree | down | up  | rank |
+-----+--------+------+---------------------+-------+-----+-------+--------+------+-----+------+
| 103 | 陆君   | 男   | 1974-06-03 00:00:00 | 95031 | 103 | 3-105 |     92 |   90 | 100 | A    |
| 107 | 王丽   | 女   | 1976-01-23 00:00:00 | 95033 | 107 | 3-105 |     91 |   90 | 100 | A    |
+-----+--------+------+---------------------+-------+-----+-------+--------+------+-----+------+
2 rows in set (0.01 sec)

mysql> select s.* from student s join grade g on g.sno=s.sno join rank r on r.rank='A' where degree>down;
+-----+--------+------+---------------------+-------+
| sno | sname  | ssex | sbirthday           | class |
+-----+--------+------+---------------------+-------+
| 103 | 陆君   | 男   | 1974-06-03 00:00:00 | 95031 |
| 107 | 王丽   | 女   | 1976-01-23 00:00:00 | 95033 |
+-----+--------+------+---------------------+-------+
2 rows in set (0.00 sec)

mysql> select s.* from student where sno in (select sno from grade where degree >(select down from rank where rank='A'));
ERROR 1051 (42S02): Unknown table 's'
mysql> select * from student where sno in (select sno from grade where degree >(select down from rank where rank='A'));
+-----+--------+------+---------------------+-------+
| sno | sname  | ssex | sbirthday           | class |
+-----+--------+------+---------------------+-------+
| 103 | 陆君   | 男   | 1974-06-03 00:00:00 | 95031 |
| 107 | 王丽   | 女   | 1976-01-23 00:00:00 | 95033 |
+-----+--------+------+---------------------+-------+
2 rows in set (0.00 sec)

mysql> select * from grade where sno='109' and cno='3-105';
+-----+-------+--------+
| sno | cno   | degree |
+-----+-------+--------+
| 109 | 3-105 |     76 |
+-----+-------+--------+
1 row in set (0.00 sec)

mysql> select * from grade where degree > (select degree from grade where sno='109' and cno='3-105');
+-----+-------+--------+
| sno | cno   | degree |
+-----+-------+--------+
| 101 | 6-166 |     85 |
| 103 | 3-105 |     92 |
| 103 | 3-245 |     86 |
| 105 | 3-105 |     88 |
| 107 | 3-105 |     91 |
| 107 | 6-106 |     79 |
| 108 | 3-105 |     78 |
| 108 | 6-166 |     81 |
| 110 | 8-111 |     89 |
+-----+-------+--------+
9 rows in set (0.01 sec)

mysql> select * from grade where degree > (select degree from grade where sno='109' and cno='3-105') and cno='3-105';
+-----+-------+--------+
| sno | cno   | degree |
+-----+-------+--------+
| 103 | 3-105 |     92 |
| 105 | 3-105 |     88 |
| 107 | 3-105 |     91 |
| 108 | 3-105 |     78 |
+-----+-------+--------+
4 rows in set (0.00 sec)

mysql> select * from grade order by sno;
+-----+-------+--------+
| sno | cno   | degree |
+-----+-------+--------+
| 101 | 3-105 |     64 |
| 101 | 6-166 |     85 |
| 103 | 3-105 |     92 |
| 103 | 3-245 |     86 |
| 105 | 3-105 |     88 |
| 105 | 3-245 |     75 |
| 107 | 3-105 |     91 |
| 107 | 6-106 |     79 |
| 108 | 3-105 |     78 |
| 108 | 6-166 |     81 |
| 109 | 3-105 |     76 |
| 109 | 3-245 |     68 |
| 110 | 8-111 |     89 |
+-----+-------+--------+
13 rows in set (0.00 sec)

mysql> mysql> select * from grade group by sno having count(*) > 1;
ERROR 1055 (42000): Expression #2 of SELECT list is not in GROUP BY clause and contains nonaggregated column 'homework.grade.cno' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by
mysql> select sno,count(*) from grade group by sno having count(*) > 1;
+-----+----------+
| sno | count(*) |
+-----+----------+
| 101 |        2 |
| 103 |        2 |
| 105 |        2 |
| 107 |        2 |
| 108 |        2 |
| 109 |        2 |
+-----+----------+
6 rows in set (0.00 sec)

mysql> select * from grade where sno in ( select sno,count(*) from grade group by sno having count(*) > 1) and degree <(select max(degree) from grade);
ERROR 1241 (21000): Operand should contain 1 column(s)
mysql> select * from grade where sno in ( select sno from grade group by sno having count(*) > 1) and degree <(select max(degree) from grade);
+-----+-------+--------+
| sno | cno   | degree |
+-----+-------+--------+
| 101 | 3-105 |     64 |
| 101 | 6-166 |     85 |
| 103 | 3-245 |     86 |
| 105 | 3-105 |     88 |
| 105 | 3-245 |     75 |
| 107 | 3-105 |     91 |
| 107 | 6-106 |     79 |
| 108 | 3-105 |     78 |
| 108 | 6-166 |     81 |
| 109 | 3-105 |     76 |
| 109 | 3-245 |     68 |
+-----+-------+--------+
11 rows in set (0.00 sec)

mysql> select * from grade where degree >(select degree from grade where sno='109' and cno='3-105');
+-----+-------+--------+
| sno | cno   | degree |
+-----+-------+--------+
| 101 | 6-166 |     85 |
| 103 | 3-105 |     92 |
| 103 | 3-245 |     86 |
| 105 | 3-105 |     88 |
| 107 | 3-105 |     91 |
| 107 | 6-106 |     79 |
| 108 | 3-105 |     78 |
| 108 | 6-166 |     81 |
| 110 | 8-111 |     89 |
+-----+-------+--------+
9 rows in set (0.00 sec)

mysql> select * from grade a join (select sno, degree from grade where sno='109' and cno='3-105') b on a.sno=b.sno;
+-----+-------+--------+-----+--------+
| sno | cno   | degree | sno | degree |
+-----+-------+--------+-----+--------+
| 109 | 3-105 |     76 | 109 |     76 |
| 109 | 3-245 |     68 | 109 |     76 |
+-----+-------+--------+-----+--------+
2 rows in set (0.00 sec)

mysql> select * from grade a join (select sno, degree from grade where sno='109' and cno='3-105') b on a.degree > b.degree;
+-----+-------+--------+-----+--------+
| sno | cno   | degree | sno | degree |
+-----+-------+--------+-----+--------+
| 101 | 6-166 |     85 | 109 |     76 |
| 103 | 3-105 |     92 | 109 |     76 |
| 103 | 3-245 |     86 | 109 |     76 |
| 105 | 3-105 |     88 | 109 |     76 |
| 107 | 3-105 |     91 | 109 |     76 |
| 107 | 6-106 |     79 | 109 |     76 |
| 108 | 3-105 |     78 | 109 |     76 |
| 108 | 6-166 |     81 | 109 |     76 |
| 110 | 8-111 |     89 | 109 |     76 |
+-----+-------+--------+-----+--------+
9 rows in set (0.00 sec)

mysql> select date(now());
+-------------+
| date(now()) |
+-------------+
| 2019-04-02  |
+-------------+
1 row in set (0.00 sec)

mysql> desc student;
+-----------+------------+------+-----+---------+-------+
| Field     | Type       | Null | Key | Default | Extra |
+-----------+------------+------+-----+---------+-------+
| sno       | varchar(3) | NO   | PRI | NULL    |       |
| sname     | varchar(4) | NO   | MUL | NULL    |       |
| ssex      | varchar(2) | YES  |     | NULL    |       |
| sbirthday | datetime   | YES  |     | NULL    |       |
| class     | varchar(5) | YES  |     | NULL    |       |
+-----------+------------+------+-----+---------+-------+
5 rows in set (0.00 sec)

mysql> select * from student where year(sbirthday) = (select year(sbirthday) from student where sno='108');
+-----+--------+------+---------------------+-------+
| sno | sname  | ssex | sbirthday           | class |
+-----+--------+------+---------------------+-------+
| 108 | 曾华   | 男   | 1977-09-01 00:00:00 | 95033 |
+-----+--------+------+---------------------+-------+
1 row in set (0.00 sec)

mysql> select * from course c join teacher t on t.tno=c.tno;
+-------+-----------------+-----+-----+--------+------+---------------------+-----------+-----------------+
| cno   | cname           | tno | tno | tname  | tsex | tbirthday           | prof      | depart          |
+-------+-----------------+-----+-----+--------+------+---------------------+-----------+-----------------+
| 3-245 | 操作系统        | 804 | 804 | 李诚   | 男   | 1958-12-02 00:00:00 | 副教授    | 计算机系        |
| 3-105 | 计算机导论      | 825 | 825 | 王萍   | 女   | 1972-05-05 00:00:00 | 助教      | 计算机系        |
| 6-166 | 数据电路        | 856 | 856 | 张旭   | 男   | 1969-03-12 00:00:00 | 讲师      | 电子工程系      |
+-------+-----------------+-----+-----+--------+------+---------------------+-----------+-----------------+
3 rows in set (0.00 sec)

mysql> select * from course c join teacher t on t.tno=c.tno where tname='张旭';
+-------+--------------+-----+-----+--------+------+---------------------+--------+-----------------+
| cno   | cname        | tno | tno | tname  | tsex | tbirthday           | prof   | depart          |
+-------+--------------+-----+-----+--------+------+---------------------+--------+-----------------+
| 6-166 | 数据电路     | 856 | 856 | 张旭   | 男   | 1969-03-12 00:00:00 | 讲师   | 电子工程系      |
+-------+--------------+-----+-----+--------+------+---------------------+--------+-----------------+
1 row in set (0.00 sec)

mysql> select cno from course c join teacher t on t.tno=c.tno where tname='张旭';
+-------+
| cno   |
+-------+
| 6-166 |
+-------+
1 row in set (0.00 sec)

mysql> select * from grade where cno in (select cno from course c join teacher t on t.tno=c.tno where tname='张旭');
+-----+-------+--------+
| sno | cno   | degree |
+-----+-------+--------+
| 101 | 6-166 |     85 |
| 108 | 6-166 |     81 |
+-----+-------+--------+
2 rows in set (0.00 sec)

mysql> select * from course c join grade g on g.cno = c.cno;                                      +-------+-----------------+-----+-----+-------+--------+
| cno   | cname           | tno | sno | cno   | degree |
+-------+-----------------+-----+-----+-------+--------+
| 3-105 | 计算机导论      | 825 | 101 | 3-105 |     64 |
| 6-166 | 数据电路        | 856 | 101 | 6-166 |     85 |
| 3-105 | 计算机导论      | 825 | 103 | 3-105 |     92 |
| 3-245 | 操作系统        | 804 | 103 | 3-245 |     86 |
| 3-105 | 计算机导论      | 825 | 105 | 3-105 |     88 |
| 3-245 | 操作系统        | 804 | 105 | 3-245 |     75 |
| 3-105 | 计算机导论      | 825 | 107 | 3-105 |     91 |
| 3-105 | 计算机导论      | 825 | 108 | 3-105 |     78 |
| 6-166 | 数据电路        | 856 | 108 | 6-166 |     81 |
| 3-105 | 计算机导论      | 825 | 109 | 3-105 |     76 |
| 3-245 | 操作系统        | 804 | 109 | 3-245 |     68 |
+-------+-----------------+-----+-----+-------+--------+
11 rows in set (0.00 sec)

mysql> select tno,count(*) from course c join grade g on g.cno = c.cno group by tno having count(*) >=5;
+-----+----------+
| tno | count(*) |
+-----+----------+
| 825 |        6 |
+-----+----------+
1 row in set (0.00 sec)

mysql> select * from grade where degree > 85;
+-----+-------+--------+
| sno | cno   | degree |
+-----+-------+--------+
| 103 | 3-105 |     92 |
| 103 | 3-245 |     86 |
| 105 | 3-105 |     88 |
| 107 | 3-105 |     91 |
| 110 | 8-111 |     89 |
+-----+-------+--------+
5 rows in set (0.00 sec)

mysql> select * from teacher where depart='计算机系'
    -> ;
+-----+--------+------+---------------------+-----------+--------------+
| tno | tname  | tsex | tbirthday           | prof      | depart       |
+-----+--------+------+---------------------+-----------+--------------+
| 804 | 李诚   | 男   | 1958-12-02 00:00:00 | 副教授    | 计算机系     |
| 825 | 王萍   | 女   | 1972-05-05 00:00:00 | 助教      | 计算机系     |
+-----+--------+------+---------------------+-----------+--------------+
2 rows in set (0.00 sec)

mysql> select tno from teacher where depart='计算机系'
    -> ;
+-----+
| tno |
+-----+
| 804 |
| 825 |
+-----+
2 rows in set (0.00 sec)

mysql> select * from course c join grade g on g.cno = c.cno;
+-------+-----------------+-----+-----+-------+--------+
| cno   | cname           | tno | sno | cno   | degree |
+-------+-----------------+-----+-----+-------+--------+
| 3-105 | 计算机导论      | 825 | 101 | 3-105 |     64 |
| 6-166 | 数据电路        | 856 | 101 | 6-166 |     85 |
| 3-105 | 计算机导论      | 825 | 103 | 3-105 |     92 |
| 3-245 | 操作系统        | 804 | 103 | 3-245 |     86 |
| 3-105 | 计算机导论      | 825 | 105 | 3-105 |     88 |
| 3-245 | 操作系统        | 804 | 105 | 3-245 |     75 |
| 3-105 | 计算机导论      | 825 | 107 | 3-105 |     91 |
| 3-105 | 计算机导论      | 825 | 108 | 3-105 |     78 |
| 6-166 | 数据电路        | 856 | 108 | 6-166 |     81 |
| 3-105 | 计算机导论      | 825 | 109 | 3-105 |     76 |
| 3-245 | 操作系统        | 804 | 109 | 3-245 |     68 |
+-------+-----------------+-----+-----+-------+--------+
11 rows in set (0.00 sec)

mysql> select * from course c join grade g on g.cno = c.cno where tno in ( select tno from teacher where depart='计算机系);
    '> ;
    '> ^[[;;
;
^C
mysql> select * from course c join grade g on g.cno = c.cno where tno in ( select tno from teacher where depart='计算机系');
+-------+-----------------+-----+-----+-------+--------+
| cno   | cname           | tno | sno | cno   | degree |
+-------+-----------------+-----+-----+-------+--------+
| 3-105 | 计算机导论      | 825 | 101 | 3-105 |     64 |
| 3-105 | 计算机导论      | 825 | 103 | 3-105 |     92 |
| 3-245 | 操作系统        | 804 | 103 | 3-245 |     86 |
| 3-105 | 计算机导论      | 825 | 105 | 3-105 |     88 |
| 3-245 | 操作系统        | 804 | 105 | 3-245 |     75 |
| 3-105 | 计算机导论      | 825 | 107 | 3-105 |     91 |
| 3-105 | 计算机导论      | 825 | 108 | 3-105 |     78 |
| 3-105 | 计算机导论      | 825 | 109 | 3-105 |     76 |
| 3-245 | 操作系统        | 804 | 109 | 3-245 |     68 |
+-------+-----------------+-----+-----+-------+--------+
9 rows in set (0.01 sec)

mysql> select * from grade where cno='3-105';
+-----+-------+--------+
| sno | cno   | degree |
+-----+-------+--------+
| 101 | 3-105 |     64 |
| 103 | 3-105 |     92 |
| 105 | 3-105 |     88 |
| 107 | 3-105 |     91 |
| 108 | 3-105 |     78 |
| 109 | 3-105 |     76 |
+-----+-------+--------+
6 rows in set (0.01 sec)

mysql> select * from grade where cno='3-105' and degree > (select min(degree) from grade where cno='3-245');
+-----+-------+--------+
| sno | cno   | degree |
+-----+-------+--------+
| 103 | 3-105 |     92 |
| 105 | 3-105 |     88 |
| 107 | 3-105 |     91 |
| 108 | 3-105 |     78 |
| 109 | 3-105 |     76 |
+-----+-------+--------+
5 rows in set (0.00 sec)

mysql> select * from grade where cno='3-105' and degree > (select min(degree) from grade where cno='3-245') order by degree desc;
+-----+-------+--------+
| sno | cno   | degree |
+-----+-------+--------+
| 103 | 3-105 |     92 |
| 107 | 3-105 |     91 |
| 105 | 3-105 |     88 |
| 108 | 3-105 |     78 |
| 109 | 3-105 |     76 |
+-----+-------+--------+
5 rows in set (0.00 sec)

mysql> select name,sex,birthday from teacher;
ERROR 1054 (42S22): Unknown column 'name' in 'field list'
mysql> select tname,tsex,tbirthday from teacher union
    -> select sname,ssex,sbirthday from student;
+--------+------+---------------------+
| tname  | tsex | tbirthday           |
+--------+------+---------------------+
| 李诚   | 男   | 1958-12-02 00:00:00 |
| 王萍   | 女   | 1972-05-05 00:00:00 |
| 刘冰   | 女   | 1977-08-14 00:00:00 |
| 张旭   | 男   | 1969-03-12 00:00:00 |
| 李军   | 男   | 1976-02-20 00:00:00 |
| 陆君   | 男   | 1974-06-03 00:00:00 |
| 匡明   | 男   | 1975-10-02 00:00:00 |
| 王丽   | 女   | 1976-01-23 00:00:00 |
| 曾华   | 男   | 1977-09-01 00:00:00 |
| 王芳   | 女   | 1975-02-10 00:00:00 |
+--------+------+---------------------+
10 rows in set (0.00 sec)

mysql> select tname name,tsex sex,tbirthday birthday from teacher union select sname,ssex,sbirthday from student;
+--------+------+---------------------+
| name   | sex  | birthday            |
+--------+------+---------------------+
| 李诚   | 男   | 1958-12-02 00:00:00 |
| 王萍   | 女   | 1972-05-05 00:00:00 |
| 刘冰   | 女   | 1977-08-14 00:00:00 |
| 张旭   | 男   | 1969-03-12 00:00:00 |
| 李军   | 男   | 1976-02-20 00:00:00 |
| 陆君   | 男   | 1974-06-03 00:00:00 |
| 匡明   | 男   | 1975-10-02 00:00:00 |
| 王丽   | 女   | 1976-01-23 00:00:00 |
| 曾华   | 男   | 1977-09-01 00:00:00 |
| 王芳   | 女   | 1975-02-10 00:00:00 |
+--------+------+---------------------+
10 rows in set (0.00 sec)

mysql> select avg(degree) from grade group by cno;
+-------------+
| avg(degree) |
+-------------+
|     81.5000 |
|     76.3333 |
|     79.0000 |
|     83.0000 |
|     89.0000 |
+-------------+
5 rows in set (0.00 sec)

mysql> select cno, avg(degree) from grade group by cno;
+-------+-------------+
| cno   | avg(degree) |
+-------+-------------+
| 3-105 |     81.5000 |
| 3-245 |     76.3333 |
| 6-106 |     79.0000 |
| 6-166 |     83.0000 |
| 8-111 |     89.0000 |
+-------+-------------+
5 rows in set (0.00 sec)

mysql> select cno, avg(degree) num from grade group by cno;
+-------+---------+
| cno   | num     |
+-------+---------+
| 3-105 | 81.5000 |
| 3-245 | 76.3333 |
| 6-106 | 79.0000 |
| 6-166 | 83.0000 |
| 8-111 | 89.0000 |
+-------+---------+
5 rows in set (0.00 sec)

mysql> select * from grade a join (select cno, avg(degree) num from grade group by cno) b on a.cno=b.cno;
+-----+-------+--------+-------+---------+
| sno | cno   | degree | cno   | num     |
+-----+-------+--------+-------+---------+
| 101 | 3-105 |     64 | 3-105 | 81.5000 |
| 101 | 6-166 |     85 | 6-166 | 83.0000 |
| 103 | 3-105 |     92 | 3-105 | 81.5000 |
| 103 | 3-245 |     86 | 3-245 | 76.3333 |
| 105 | 3-105 |     88 | 3-105 | 81.5000 |
| 105 | 3-245 |     75 | 3-245 | 76.3333 |
| 107 | 3-105 |     91 | 3-105 | 81.5000 |
| 107 | 6-106 |     79 | 6-106 | 79.0000 |
| 108 | 3-105 |     78 | 3-105 | 81.5000 |
| 108 | 6-166 |     81 | 6-166 | 83.0000 |
| 109 | 3-105 |     76 | 3-105 | 81.5000 |
| 109 | 3-245 |     68 | 3-245 | 76.3333 |
| 110 | 8-111 |     89 | 8-111 | 89.0000 |
+-----+-------+--------+-------+---------+
13 rows in set (0.00 sec)

mysql> select * from grade a join (select cno, avg(degree) num from grade group by cno) b on a.cno=b.cno where degree < num;
+-----+-------+--------+-------+---------+
| sno | cno   | degree | cno   | num     |
+-----+-------+--------+-------+---------+
| 101 | 3-105 |     64 | 3-105 | 81.5000 |
| 105 | 3-245 |     75 | 3-245 | 76.3333 |
| 108 | 3-105 |     78 | 3-105 | 81.5000 |
| 108 | 6-166 |     81 | 6-166 | 83.0000 |
| 109 | 3-105 |     76 | 3-105 | 81.5000 |
| 109 | 3-245 |     68 | 3-245 | 76.3333 |
+-----+-------+--------+-------+---------+
6 rows in set (0.00 sec)

